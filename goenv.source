# This file was generated by the 'goenv' program.

goenv_NAME='.'
goenv_COLOR='0;31'

# Find the directory where this script is located:
SOURCE="${BASH_SOURCE[0]}"
while [ -h "$SOURCE" ] ; do SOURCE="$(readlink "$SOURCE")"; done
goenv_dir="$( cd -P "$( dirname "$SOURCE" )" && pwd )"

if [[ "$(getconf LONG_BIT)" == "64" ]]; then
	goenv_arch=linux_amd64
else
	goenv_arch=linux_386
fi

if [[ "$goenv_IS_ACTIVE" == "1" ]]; then
	deactivate
fi

echo "* Saving old shell environment"
export goenv_IS_ACTIVE=1
export goenv_OLDPS1=$PS1
export goenv_OLDGOPATH=$GOPATH
export goenv_OLDLD_LIBRARY_PATH=$LD_LIBRARY_PATH
export goenv_OLDPATH=$PATH

echo "* Enabling goenv enviornment '${goenv_NAME}':"
export GOPATH="$goenv_dir:$GOPATH"
export LD_LIBRARY_PATH=$goenv_dir/lib/$goenv_arch:$LD_LIBRARY_PATH
export PATH="$goenv_dir/bin:$PATH"
export PS1="[${goenv_COLOR}m(${goenv_NAME})[0m${PS1}"

echo "  - GOPATH:          Prepended '$goenv_dir'"
echo "  - PATH:            Prepended '$goenv_dir/bin'"
echo "  - LD_LIBRARY_PATH: Prepended '$goenv_dir/lib/$goenv_arch'"

echo -e "\nRun 'deactive' to restore the original shell environment"

deactivate() {
	echo "* Restoring old shell environment"
	export PS1=$goenv_OLDPS1
	export GOPATH=$goenv_OLDGOPATH
	export LD_LIBRARY_PATH=$goenv_OLDLD_LIBRARY_PATH
	export PATH=$goenv_OLDPATH
	unset goenv_IS_ACTIVE goenv_OLDPS1 goenv_OLDPATH goenv_OLDGOPATH goenv_OLDLD_LIBRARY_PATH
	unset -f deactivate
}
